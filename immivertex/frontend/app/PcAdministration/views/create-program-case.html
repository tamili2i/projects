<div class="container-fluid program-case-form">
  <div class="row">
    <div class="col-md-12">
      <panel panel-class="panel-sky" heading="{{createPcCtrl.title}} Program Case">
        <panel-controls>
          <panel-control-collapse></panel-control-collapse>
        </panel-controls>
        <div class="tab-container tab-left tab-sky">
          <div class="tab-content">
            <div class="row">
              <div class="col-md-12">
                <form role="form" class="form-horizontal form-elements" ng-submit="pcForm.$valid && createPcCtrl.saveProgramCase(pcForm)" name="pcForm" novalidate>
                  <fieldset>
                      <legend>{{createPcCtrl.title}} Program Case</legend>
                    <div class="row">
                      <div class="col-xs-12  col-sm-12 col-md-6">
                        <div class="form-group"
                          ng-class="{'has-error':(pcForm.name.$error.required || pcForm.name.$error.availability) &&
                          (pcForm.name.$touched|| pcForm.name.$dirty || pcForm.$submitted)}">
                          <label class="col-sm-3 col-md-3 control-label">Name</label>
                          <div class="col-sm-8 col-md-8">
                            <input type="text" ng-disabled="createPcCtrl.edit" name="name" ng-model="createPcCtrl.programCase.name" class="form-control" ng-change="createPcCtrl.setAvailability(pcForm.name)" required/>
                            <ng-messages for="pcForm.name.$error"
                              ng-if='pcForm.name.$touched || pcForm.name.$dirty || pcForm.$submitted' class="help-block" role="alert">
                             <ng-message when="required">Name is required</ng-message>
                             <ng-message when="availability">Name already taken</ng-message>
                            </ng-messages>
                          </div>
                          <div class="col-sm-1 col-md-1">
                            <i class="fa fa-circle mandatory"></i>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-12  col-sm-12 col-md-6">
                        <div class="form-group" ng-class="{'has-error':(pcForm.description.$error.required) &&
                        (pcForm.description.$touched|| pcForm.description.$dirty || pcForm.$submitted)}">
                          <label class="col-sm-3 col-md-3 control-label">Description</label>
                          <div class="col-sm-8 col-md-8">
                            <input type="text" ng-disabled="createPcCtrl.edit" name="description" ng-model="createPcCtrl.programCase.description" class="form-control" required/>
                            <ng-messages for="pcForm.name.$error"
                              ng-if='pcForm.description.$touched || pcForm.description.$dirty || pcForm.$submitted' class="help-block" role="alert">
                             <ng-message when="required">Description is required</ng-message>
                            </ng-messages>
                          </div>
                          <div class="col-sm-1 col-md-1">
                            <i class="fa fa-circle mandatory"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                    <legend>Associations</legend>
                    <div class="row">
                      <div class="col-xs-12  col-sm-12 col-md-6">
                        <div class="form-group" ng-class="{'has-error':pcForm.intakeForm.$error.required && pcForm.$submitted}">
                          <label class="col-sm-3 col-md-3 control-label">Intake Form</label>
                          <div class="col-sm-8 col-md-8">
                            <ui-select ng-disabled="createPcCtrl.edit" multi-select-required name="intakeForm" ng-model="createPcCtrl.programCase.intake_form_id" multiple="multiple" theme="select2" class="form-control">
                              <ui-select-match>{{$item.name}}</ui-select-match>
                              <ui-select-choices repeat="intakeForm.id as intakeForm in createPcCtrl.intakeForms | filter: $select.search">
                                <div ng-bind-html="intakeForm.name | highlight: $select.search"></div>
                              </ui-select-choices>
                            </ui-select>
                            <ng-messages for="pcForm.intakeForm.$error"
                              ng-if='pcForm.$submitted' class="help-block" role="alert">
                             <ng-message when="required">Intake Form is required</ng-message>
                            </ng-messages>
                          </div>
                          <div class="col-sm-1 col-md-1">
                            <i class="fa fa-circle mandatory"></i>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-12  col-sm-12 col-md-6">
                        <div class="form-group" ng-class="{'has-error':pcForm.formTemplate.$error.required && pcForm.$submitted}">
                          <label class="col-sm-3 col-md-3 control-label">Form Template</label>
                          <div class="col-sm-8 col-md-8">
                            <ui-select ng-disabled="createPcCtrl.edit" multi-select-required name="formTemplate" ng-model="createPcCtrl.programCase.form_template_id" multiple="multiple" theme="select2" class="form-control">
                              <ui-select-match>{{$item.name}}</ui-select-match>
                              <ui-select-choices repeat="formTemplate.id as formTemplate in createPcCtrl.formTemplates | filter: $select.search">
                                <div ng-bind-html="formTemplate.name | highlight: $select.search"></div>
                              </ui-select-choices>
                            </ui-select>
                            <ng-messages for="pcForm.formTemplate.$error"
                              ng-if='pcForm.$submitted' class="help-block" role="alert">
                             <ng-message when="required">Form Template is required</ng-message>
                            </ng-messages>
                          </div>
                          <div class="col-sm-1 col-md-1">
                            <i class="fa fa-circle mandatory"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xs-12  col-sm-12 col-md-6">
                        <div class="form-group" ng-class="{'has-error':(pcForm.checklist.$error.required) &&
                        (pcForm.checklist.$touched|| pcForm.checklist.$dirty || pcForm.$submitted)}">
                          <label class="col-sm-3 col-md-3 control-label">Check List</label>
                          <div class="col-sm-8 col-md-8">
                            <ui-select ng-disabled="createPcCtrl.edit" multi-select-required name="checklist" ng-model="createPcCtrl.programCase.document_checklist_id" multiple="multiple" theme="select2" class="form-control">
                              <ui-select-match>{{$item.name}}</ui-select-match>
                              <ui-select-choices repeat="checkList.id as checkList in createPcCtrl.checkLists | filter: $select.search">
                                <div ng-bind-html="checkList.name | highlight: $select.search"></div>
                              </ui-select-choices>
                            </ui-select>
                            <ng-messages for="pcForm.checklist.$error"
                              ng-if='pcForm.checklist.$touched || pcForm.checklist.$dirty || pcForm.$submitted' class="help-block" role="alert">
                             <ng-message when="required">Checklist is required</ng-message>
                            </ng-messages>
                          </div>
                          <div class="col-sm-1 col-md-1">
                            <i class="fa fa-circle mandatory"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="text-center col-md-12">
                      <input type="submit" value="Save" ng-if="!createPcCtrl.edit" class="btn btn-primary m-r-10" />
                      <a class="btn btn-default" ui-sref="home.programs">Cancel</a>
                    </div>
                  </fieldset>
                </form>
              </div>
            </div>
          </div>
        </div>
      </panel>
    </div>
  </div>
</div>
